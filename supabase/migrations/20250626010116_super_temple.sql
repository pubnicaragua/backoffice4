/*
  # Create sample data for Solvendo Back Office

  1. Sample Data
    - Add sample ventas (sales)
    - Add sample asistencias (attendance)
    - Add sample mermas (losses)
    - Add sample productos (products)

  2. Data Structure
    - Realistic data for testing
    - Proper relationships
    - Current dates
*/

-- Insert sample empresas if not exists
INSERT INTO empresas (id, rut, razon_social, giro, activo) VALUES
('00000000-0000-0000-0000-000000000001', '12345678-9', 'Empresa Demo', 'Retail', true)
ON CONFLICT (id) DO NOTHING;

-- Insert sample sucursales if not exists
INSERT INTO sucursales (id, empresa_id, nombre, direccion, activo) VALUES
('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'Sucursal N°1', 'Av. Principal 123', true),
('00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', 'Sucursal N°2', 'Calle Secundaria 456', true)
ON CONFLICT (id) DO NOTHING;

-- Insert sample productos
INSERT INTO productos (id, codigo, nombre, descripcion, precio, tipo, unidad, activo) VALUES
('00000000-0000-0000-0000-000000000001', 'PROD001', 'Coca Cola 500ml', 'Bebida gaseosa', 1500, 'producto', 'UN', true),
('00000000-0000-0000-0000-000000000002', 'PROD002', 'Pan Hallulla', 'Pan fresco', 800, 'producto', 'UN', true),
('00000000-0000-0000-0000-000000000003', 'PROD003', 'Leche 1L', 'Leche entera', 1200, 'producto', 'UN', true),
('00000000-0000-0000-0000-000000000004', 'PROD004', 'Arroz 1kg', 'Arroz grado 1', 2500, 'producto', 'KG', true),
('00000000-0000-0000-0000-000000000005', 'PROD005', 'Aceite 1L', 'Aceite vegetal', 3200, 'producto', 'UN', true)
ON CONFLICT (id) DO NOTHING;

-- Insert sample ventas (last 30 days)
INSERT INTO ventas (id, empresa_id, sucursal_id, folio, tipo_dte, metodo_pago, total, fecha) VALUES
('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '001001', 'boleta', 'efectivo', 15000, NOW() - INTERVAL '1 day'),
('00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '001002', 'boleta', 'tarjeta', 8500, NOW() - INTERVAL '2 days'),
('00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000002', '002001', 'factura', 'efectivo', 25000, NOW() - INTERVAL '3 days'),
('00000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '001003', 'boleta', 'tarjeta', 12000, NOW() - INTERVAL '4 days'),
('00000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000002', '002002', 'boleta', 'efectivo', 18500, NOW() - INTERVAL '5 days'),
('00000000-0000-0000-0000-000000000006', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '001004', 'factura', 'tarjeta', 32000, NOW() - INTERVAL '6 days'),
('00000000-0000-0000-0000-000000000007', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '001005', 'boleta', 'efectivo', 9500, NOW() - INTERVAL '7 days'),
('00000000-0000-0000-0000-000000000008', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000002', '002003', 'boleta', 'tarjeta', 14500, NOW() - INTERVAL '8 days'),
('00000000-0000-0000-0000-000000000009', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '001006', 'factura', 'efectivo', 28000, NOW() - INTERVAL '9 days'),
('00000000-0000-0000-0000-000000000010', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000002', '002004', 'boleta', 'tarjeta', 16500, NOW() - INTERVAL '10 days')
ON CONFLICT (id) DO NOTHING;

-- Insert sample asistencias
INSERT INTO asistencias (id, empresa_id, sucursal_id, fecha, hora_ingreso, hora_salida, estado) VALUES
('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', CURRENT_DATE, '08:00', '18:00', 'presente'),
('00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', CURRENT_DATE, '08:15', '18:00', 'tarde'),
('00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000002', CURRENT_DATE, NULL, NULL, 'ausente'),
('00000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', CURRENT_DATE, '08:00', '18:00', 'presente'),
('00000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000002', CURRENT_DATE, '08:00', '18:00', 'presente'),
('00000000-0000-0000-0000-000000000006', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', CURRENT_DATE - 1, '08:00', '18:00', 'presente'),
('00000000-0000-0000-0000-000000000007', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000002', CURRENT_DATE - 1, NULL, NULL, 'ausente'),
('00000000-0000-0000-0000-000000000008', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', CURRENT_DATE - 1, '08:30', '18:00', 'tarde'),
('00000000-0000-0000-0000-000000000009', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000002', CURRENT_DATE - 1, '08:00', '18:00', 'presente'),
('00000000-0000-0000-0000-000000000010', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', CURRENT_DATE - 1, '08:00', '18:00', 'presente')
ON CONFLICT (id) DO NOTHING;

-- Insert sample mermas
INSERT INTO mermas (id, sucursal_id, producto_id, tipo, cantidad, fecha) VALUES
('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'robo', 5, CURRENT_DATE),
('00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000002', 'vencimiento', 10, CURRENT_DATE - 1),
('00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000003', 'daño', 3, CURRENT_DATE - 2),
('00000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000004', 'otro', 2, CURRENT_DATE - 3),
('00000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000005', 'robo', 1, CURRENT_DATE - 4),
('00000000-0000-0000-0000-000000000006', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'vencimiento', 8, CURRENT_DATE - 5),
('00000000-0000-0000-0000-000000000007', '00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000002', 'daño', 4, CURRENT_DATE - 6),
('00000000-0000-0000-0000-000000000008', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000003', 'otro', 6, CURRENT_DATE - 7)
ON CONFLICT (id) DO NOTHING;

-- Insert sample promociones
INSERT INTO promociones (id, empresa_id, sucursal_id, nombre, descripcion, precio_prom, limite_cant, activo) VALUES
('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'Bebidas 2x1', '2 bebidas por el precio de 1', 1500, 50, true),
('00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000002', 'Pan + Leche', 'Combo pan y leche', 1800, 30, true),
('00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'Descuento Arroz', '20% descuento en arroz', 2000, 25, true)
ON CONFLICT (id) DO NOTHING;